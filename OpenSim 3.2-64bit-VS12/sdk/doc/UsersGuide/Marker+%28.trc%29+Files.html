<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>OpenSim Documentation : Marker (.trc) Files</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body>
        <div id="page">
            <div id="main">
                <div id="main-header" class="pageSectionHeader">
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            OpenSim Documentation : Marker (.trc) Files
                        </span>
                    </h1>

                    <div class="page-metadata">
                        <p>This page last changed on Apr 15, 2013 by <font color="#0050B2">jenhicks</font>.</p>
                    </div>
                </div>

                <div id="content" class="view">
                    <div id="main-content" class="wiki-content group">
                    <p>The topics covered in this section include:</p><p><div>
<ul>
    <li><a href='#MarkertrcFiles-Overview'>Overview</a></li>
    <li><a href='#MarkertrcFiles-RepresentingMarkerDatainatrcFile'>Representing Marker Data in a .trc File</a></li>
</ul></div></p><h2 id="MarkertrcFiles-Overview">Overview</h2><p>The <span style="color: rgb(128,0,0);"><em>.trc</em></span> (Track Row Column) file format was created by Motion Analysis Corporation to specify the positions of markers placed on a subject at different times during a motion capture trial. An example .trc file (subject01_walk1.trc) is provided in the Models/Gait2354_Simbody directory, which is part of the OpenSim distribution. A fragment of this file is shown in the figure below.</p><p><img class="confluence-embedded-image" src="attachments/3376149/3736917.png" data-image-src="attachments/3376149/3736917.png" title="image2011-11-29 11:33:36.png"><br /><strong>Figure</strong><strong>: .trc File.</strong> The first few lines of the file are shown here.</p><p>The first three lines of the .trc file is a header, followed by two rows of column labels, followed by a blank row, followed by the rows of data. Each row of data contains a frame number followed by a time value followed by the (<em>x</em>, <em>y</em>, <em>z</em>) coordinates of each marker. As a plain text file, a .trc file is commonly tab-delimited. So, for example, the fourth line in the .trc file figure above would look like this in plain text:<br /> Frame#&lt;tab&gt;Time&lt;tab&gt;R.ASIS&lt;tab&gt;&lt;tab&gt;&lt;tab&gt;L.ASIS&lt;tab&gt;&lt;tab&gt;&lt;tab&gt;V.Sacral… where &lt;tab&gt; indicates each tab character that would be present in the file.</p><p><strong>DataRate</strong>, 60 in this case, indicates the sampling rate of the data in this .trc file in Hertz. So, for example, from frame 1 to frame 2, the time increases by 1/60 second. <strong>NumFrames</strong>, 900 in this case, indicates the number of frames (rows) of data in the whole .trc file. <strong>OrigDataStartFrame</strong>, 1 in this case, indicates the frame number of the first frame (row) of data in the .trc file. Thus, the time <em>t</em> at which frame <em>f</em> was captured is <em>t</em> = (<em>f</em> – OrigDataStartFrame) / DataRate.</p><p>Note that the fourth row, which contains column labels, contains the name of each marker in the first column where the marker's coordinates appear. In the fifth row, the individual coordinates of each marker are actually labeled as <strong>X1</strong>, <strong>Y1</strong>, <strong>Z1</strong>, <strong>X2</strong>, <strong>Y2</strong>, <strong>Z2</strong>, etc. If this format for the fourth and fifth rows is not followed by a .trc file, OpenSim may fail to read the file's data correctly.</p><p>The manual for Motion Analysis' EVaRT (EVa Real-Time Software) contains a description of the .trc file format. For example, in the EVaRT 4.2 manual, the .trc file format is described in Appendix G on pages G-4 and G-5.</p><h2 id="MarkertrcFiles-RepresentingMarkerDatainatrcFile">Representing Marker Data in a .trc File</h2><p>As mentioned earlier, marker data must be imported into OpenSim in a .trc file with all marker coordinates transformed to the model coordinate system. An example .trc file (subject01_walk1.trc) is provided in the examples/Gait2354_Simbody directory, which is part of the OpenSim distribution.</p><p>In addition, the chapter on <a href="Scaling.html">Scaling</a> has details on how to represent the marker set in an XML file. It is important that the names of the markers given in the XML file describing the marker set be exactly the same as the names of the markers in the fourth line of the .trc file.</p><p> </p><div class="panel" style="background-color: white;border-color: gray;border-style: solid;border-width: 5px;"><div class="panelContent" style="background-color: white;">
<p>Next: <a href="Motion%2B%2528.mot%2529%2BFiles.html">Motion (.mot) Files</a></p><p>Previous: <a href="Coordinates%2Band%2BUtilities.html">Coordinates and Utilities</a></p><p>Home: <a href="Preparing%2BYour%2BData.html">Preparing Your Data</a></p>
</div></div>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/3376149/3736917.png">image2011-11-29 11:33:36.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" style="background: url(http://simtk-confluence.stanford.edu:8080/images/border/border_bottom.gif) repeat-x;">
                <p><small>Document generated by Confluence on Feb 24, 2014 09:27</small></p>
            </div>
        </div>     </body>
</html>

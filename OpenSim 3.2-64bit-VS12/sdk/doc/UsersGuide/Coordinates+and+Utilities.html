<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>OpenSim Documentation : Coordinates and Utilities</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body>
        <div id="page">
            <div id="main">
                <div id="main-header" class="pageSectionHeader">
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            OpenSim Documentation : Coordinates and Utilities
                        </span>
                    </h1>

                    <div class="page-metadata">
                        <p>This page last changed on Nov 14, 2012 by <font color="#0050B2">jenhicks</font>.</p>
                    </div>
                </div>

                <div id="content" class="view">
                    <div id="main-content" class="wiki-content group">
                    <div class="wiki-content" style="margin-left: 0.0px;"><p>The topics covered in this section include:</p><p><div>
<ul>
    <li><a href='#CoordinatesandUtilities-LaboratoryCoordinates'>Laboratory Coordinates</a></li>
    <li><a href='#CoordinatesandUtilities-OpenSimUtilities'>OpenSim Utilities</a></li>
</ul></div></p><h2 id="CoordinatesandUtilities-LaboratoryCoordinates">Laboratory Coordinates</h2><p>Every set of (<em>x</em>, <em>y</em>, <em>z</em>) coordinates obtained from a motion capture system is given relative to some coordinate system. Typically, this coordinate system is called the <span style="color: rgb(128,0,0);"><em>laboratory coordinate system</em></span>, or simply <span style="color: rgb(128,0,0);"><em>laboratory coordinates</em></span>. The laboratory coordinate system is generally an inertial frame fixed to the Earth. Before inputting any coordinates from motion capture into OpenSim, it is your responsibility to ensure that all (<em>x</em>, <em>y</em>, <em>z</em>) coordinates have been transformed from the laboratory coordinate system to the model coordinate system used in OpenSim. Although you can define an arbitrary model coordinate system, the standard convention used in OpenSim is as follows: Assume that the model is a full-body musculoskeletal model of the human body, standing in an upright position on the ground. The origin of the model coordinate system is halfway between its feet. The <em>x</em>-axis of the model coordinate system points forward from the model, the <em>y</em>-axis points upward, and the <em>z</em>-axis points to the right of the model.</p><p>If all positions and distances are converted to meters, then all (<em>x</em>, <em>y</em>, <em>z</em>) coordinates can be mapped from the laboratory coordinate system to the model coordinate system by an orthonormal transformation. An orthonormal transformation can be represented by a 3 X 3 rotation matrix whose rows (and columns) are a set of orthogonal vectors of length one,. This matrix represents the orientation of the laboratory coordinate frame in the model coordinate frame. So, to transform the coordinates of a point <sup>lab</sup><em>P</em> = (<em>x</em>, <em>y</em>, <em>z</em>) given in the laboratory coordinate frame to its coordinates <sup>model</sup><em>P</em> = (<em>x</em>', <em>y</em>', <em>z</em>') in the model coordinate frame, you would employ the following transformation, where <sup>model</sup><sub>lab</sub><em>R</em> is the matrix whose columns are the vectors of the laboratory coordinate frame specified in the model coordinate frame:<br /><sup>model</sup><em>P</em> = <sup>model</sup><sub>lab</sub><em>R</em> * <sup>lab</sup><em>P</em></p><p>External forces and moments are usually given in the coordinate system of a particular force sensor, such as a force plate, which may be different than the laboratory coordinate system. In this case, the force and moment data must be transformed from the appropriate force sensor's coordinate system to the model coordinate system.</p><h2 id="CoordinatesandUtilities-OpenSimUtilities">OpenSim Utilities</h2><p>Example Matlab scripts for converting certain specific types of motion capture data into a form recognized by OpenSim are provided in the OpenSim Utilities project on Simtk.org (<a class="external-link" href="https://simtk.org/home/opensim-utils" rel="nofollow">https://simtk.org/home/opensim-utils</a>). We provide these utilities as examples that have been applied successfully to data sets from the Center for Gait and Motion Analysis at Gillette Children's Specialty Healthcare in St. Paul, MN, USA, and the Human Performance Laboratory at Stanford University in Stanford, CA, USA. However, it is difficult to anticipate lab-specific formats and conventions, so it is your responsibility to adapt these examples to the needs of your individual laboratories and motion capture systems.</p></div><div class="pageSection group"><p> </p><div class="panel" style="background-color: white;border-color: gray;border-style: solid;border-width: 5px;"><div class="panelContent" style="background-color: white;">
<p>Next: <a href="Marker%2B%2528.trc%2529%2BFiles.html">Marker (.trc) Files</a></p><p>Previous: <a href="Collecting%2BExperimental%2BData.html">Collecting Experimental Data</a></p><p>Home: <a href="Preparing%2BYour%2BData.html">Preparing Your Data</a></p>
</div></div><p> </p> </div>
                    </div>

                    
                                                      
                </div>             </div> 
            <div id="footer" style="background: url(http://simtk-confluence.stanford.edu:8080/images/border/border_bottom.gif) repeat-x;">
                <p><small>Document generated by Confluence on Feb 24, 2014 09:27</small></p>
            </div>
        </div>     </body>
</html>

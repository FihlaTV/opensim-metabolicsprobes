<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>OpenSim Documentation : Getting Started with Inverse Kinematics</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body>
        <div id="page">
            <div id="main">
                <div id="main-header" class="pageSectionHeader">
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            OpenSim Documentation : Getting Started with Inverse Kinematics
                        </span>
                    </h1>

                    <div class="page-metadata">
                        <p>This page last changed on Jan 23, 2014 by <font color="#0050B2">jenhicks</font>.</p>
                    </div>
                </div>

                <div id="content" class="view">
                    <div id="main-content" class="wiki-content group">
                    <div class="wiki-content" style="margin-left: 0.0px;"><div><p>The Inverse Kinematics (IK) Tool steps through each time frame of experimental data and positions the model in a pose that &quot;best matches&quot; experimental marker and coordinate data for that time step. This &quot;best match&quot; is the pose that minimizes a sum of weighted squared errors of markers and/or coordinates. Obtaining accurate results from the IK Tool is essential for using later tools like Static Optimization, Residual Reduction Algorithm, and Computed Muscle Control.</p></div><p>To launch the IK Tool, select <strong>Tools</strong> → <strong>Inverse Kinematics</strong> from the OpenSim main menu bar.</p><p><div>
<ul>
    <li><a href='#GettingStartedwithInverseKinematics-Overview'>Overview</a></li>
    <li><a href='#GettingStartedwithInverseKinematics-Inputs'>Inputs</a></li>
    <li><a href='#GettingStartedwithInverseKinematics-Outputs'>Outputs</a></li>
    <li><a href='#GettingStartedwithInverseKinematics-BestPracticesandTroubleshooting'>Best Practices and Troubleshooting</a></li>
<ul>
    <li><a href='#GettingStartedwithInverseKinematics-DataCollectionandOtherPreparation'>Data Collection and Other Preparation:</a></li>
    <li><a href='#GettingStartedwithInverseKinematics-InverseKinematicsSettings'>Inverse Kinematics Settings:</a></li>
    <li><a href='#GettingStartedwithInverseKinematics-EvaluatingyourResults'>Evaluating your Results:</a></li>
</ul>
</ul></div></p><p><img class="confluence-embedded-image" src="attachments/3376172/3737045.png" data-image-src="attachments/3376172/3737045.png"></p><p><strong>Inverse Kinematics (IK) Tool Overview.</strong> Experimental markers are matched by model markers throughout the motion by varying the joint angles (generalized coordinates) through time.</p><h2 id="GettingStartedwithInverseKinematics-Overview">Overview</h2><p><img class="confluence-embedded-image" width="500" src="attachments/3376172/5964193.png" data-image-src="attachments/3376172/5964193.png"></p><p><strong>Inputs and Outputs of the IK Tool.</strong> Experimental data are shown in <span style="color: rgb(0,176,80);">green</span>; OpenSim files (.osim) are shown in <span style="color: rgb(148,54,52);">red</span>; settings files are shown in <span style="color: rgb(0,0,255);">blue</span>.</p><div class="panelMacro"><p> </p><div class='panelMacro'><table class='infoMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/information.png" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><p>The file names are examples that can be found in the Models/Gait2354_Simbody directory installed with the OpenSim distribution.</p></td></tr></table></div><p> </p></div><h2 id="GettingStartedwithInverseKinematics-Inputs">Inputs</h2><p>The primary inputs to IK are the following files:</p><ol><li><strong><span style="color: rgb(128,0,0);">subject01_simbody.osim</span></strong>: A subject-specific OpenSim model generated by scaling a generic model with the Scale Tool or by other means, along with an associated marker set containing adjusted virtual markers.</li><li><strong><span style="color: rgb(0,128,0);">subject01_walk1.trc</span></strong>: Experimental marker trajectories for a trial obtained from a motion capture system, along with the time range of interest.</li><li><strong><span style="color: rgb(0,0,255);">gait2354_Setup_IK.xml</span></strong>: A file containing all the settings information for the IK tool, including marker weightings (IK tasks). As in the Scale Tool, marker weights are relative and determine how &quot;well&quot; the virtual markers track experimental markers (a larger weight for a given marker will mean less error–the distance between the virtual and experimental representations of a marker–for that marker).</li><li><strong><span style="color: rgb(0,128,0);">subject01_coords.mot</span></strong> (optional): Experimental generalized coordinate values (joint angles) for a trial obtained from alternative motion capture devices or other specialized algorithms. You can optionally specify relative coordinate weights in the Tasks file, if joint angles are known a priori.</li></ol><h2 id="GettingStartedwithInverseKinematics-Outputs">Outputs</h2><ol><li><span style="color: rgb(128,0,128);"><strong>subject01_walk1_ik.mot</strong></span>: A motion file containing the generalized coordinate trajectories (joint angles and/or translations) computed by IK.</li></ol><h2 id="GettingStartedwithInverseKinematics-BestPracticesandTroubleshooting">Best Practices and Troubleshooting</h2><p><h4 id="GettingStartedwithInverseKinematics-DataCollectionandOtherPreparation">Data Collection and Other Preparation:</h4><ol><li>When collecting experimental data, place three non-collinear markers per body segment that you want to track. You need at least three markers to track the 6-degree-of-freedom motion (position and orientation) of a body segment.</li><li>Place markers on anatomical locations with minimum skin/muscle motion.</li><li>These are just a few tips. Also review our full guide to <a href="http://simtk-confluence.stanford.edu:8080/display/OpenSim/Collecting+Experimental+Data" rel="nofollow">Collecting Experimental Data</a>.</li></ol><h4 id="GettingStartedwithInverseKinematics-InverseKinematicsSettings">Inverse Kinematics Settings:</h4><ol><li>Weight &quot;motion&quot; segment markers (from a triad placed on the thigh segment, for example) more heavily than anatomical markers affixed to landmarks like the greater trochanter and the acromion, which can be helpful for scaling, but are influenced by muscle and other soft tissue movements during motion.</li><li>Relative marker weightings are more important than their absolute values. Therefore, a weighting of 10 vs. 1 is 10 times more important, whereas 20 vs. 10 is only twice as important. Markers are not necessarily tracked better because they both have higher weightings.</li><li>See <a href="http://simtk-confluence.stanford.edu:8080/display/OpenSim/How+Inverse+Kinematics+Works">How Inverse Kinematics Works</a> and <a href="http://simtk-confluence.stanford.edu:8080/display/OpenSim/How+to+Use+the+IK+Tool">How to Use the IK Tool</a> for more information about IK settings.</li></ol><h4 id="GettingStartedwithInverseKinematics-EvaluatingyourResults">Evaluating your Results:</h4><ol><li>Total RMS and maximum marker errors are reported in the &quot;Messages&quot; window. Use these values to guide changes in weightings or, if necessary, to redo marker placement and possibly scaling. Maximum marker error should generally be less than 2-4 cm, and RMS under 2 cm is achievable. These guidelines will vary depending on the nature of the model and the motion being examined.</li><li>If using coordinates from a motion capture system, make sure that the joint/coordinate definitions match—otherwise, you may cause more harm than good.</li><li>Compare your results to similar data reported in the literature. Your results from an unimpaired average adult should generally be within one standard deviation.</li><li>If you are unsatisfied with the results, recheck the results of scaling.</li></ol></p><p> </p><div class="panel" style="background-color: white;border-color: gray;border-style: solid;border-width: 5px;"><div class="panelContent" style="background-color: white;">
<p>Next: <a href="How%2BInverse%2BKinematics%2BWorks.html">How Inverse Kinematics Works</a></p><p>Home: <a href="Inverse%2BKinematics.html">Inverse Kinematics</a></p>
</div></div><p> </p></div><div class="pageSection group"> </div>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/3376172/3737045.png">IK_1.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/3376172/5964193.png">IK.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" style="background: url(http://simtk-confluence.stanford.edu:8080/images/border/border_bottom.gif) repeat-x;">
                <p><small>Document generated by Confluence on Feb 24, 2014 09:27</small></p>
            </div>
        </div>     </body>
</html>

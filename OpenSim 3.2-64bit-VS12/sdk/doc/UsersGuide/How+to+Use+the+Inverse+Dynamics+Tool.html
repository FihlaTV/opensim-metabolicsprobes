<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>OpenSim Documentation : How to Use the Inverse Dynamics Tool</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body>
        <div id="page">
            <div id="main">
                <div id="main-header" class="pageSectionHeader">
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            OpenSim Documentation : How to Use the Inverse Dynamics Tool
                        </span>
                    </h1>

                    <div class="page-metadata">
                        <p>This page last changed on Mar 13, 2013 by <font color="#0050B2">silder</font>.</p>
                    </div>
                </div>

                <div id="content" class="view">
                    <div id="main-content" class="wiki-content group">
                    <p>The topics covered in this section include:</p><p><div>
<ul>
    <li><a href='#HowtoUsetheInverseDynamicsTool-HowtoUsetheGUI'>How to Use the GUI</a></li>
<ul>
    <li><a href='#HowtoUsetheInverseDynamicsTool-TheControlPanel'>The Control Panel</a></li>
    <li><a href='#HowtoUsetheInverseDynamicsTool-MainSettingsPane'>Main Settings Pane</a></li>
    <li><a href='#HowtoUsetheInverseDynamicsTool-ExternalLoadsSpecification'>External Loads Specification</a></li>
</ul>
    <li><a href='#HowtoUsetheInverseDynamicsTool-Command-lineExecution'>Command-line Execution</a></li>
</ul></div></p><h2 id="HowtoUsetheInverseDynamicsTool-HowtoUsetheGUI">How to Use the GUI</h2><p>The inverse dynamics tool is accessed by selecting <strong>Tools → Inverse Dynamics…</strong> from the OpenSim main menu bar. Like all tools, the operations performed by the inverse dynamics tool apply to the current model. The name of the current model is shown in bold in the Navigator. See <a href="Opening%252C%2BClosing%252C%2Band%2BUsing%2Bthe%2BNavigator%2BWindow.html">Opening, Closing, and Using the Navigator Window</a> for information on opening models and making a particular model current.</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="nohighlight confluenceTh"><img class="confluence-embedded-image" src="attachments/3376167/3737014.png" data-image-src="attachments/3376167/3737014.png"></th><th class="nohighlight confluenceTh" colspan="1"><ul><li><p>The Inverse Dynamics Tool is controlled by a window with two tabbed panes.</p></li><li><p>The <em>Main Settings</em> pane is used to specify parameters relating to the input kinematics of the current model, the time range for the analysis, and the output of the results.</p></li><li><p>The <em>External Loads</em> pane is used to specify parameters relating to the external loads applied to the model during the analysis.</p></li></ul><div class='panelMacro'><table class='infoMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/information.png" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><p>Use the <strong>Load...</strong> and <strong>Save...</strong> buttons to store and reload your tool settings. For more information see the section on <a href="How%2Bto%2BUse%2Bthe%2BScale%2BTool.html#HowtoUsetheScaleTool-TheControlPanel">The Control Panel</a> in the section on <a href="How%2Bto%2BUse%2Bthe%2BScale%2BTool.html">How to Use the Scale Tool</a><a href="http://How+to+Use+the+Scale+Tool#HowtoUsetheScaleTool-TheControlPanelTheControlPanel" class="external-link" rel="nofollow">.</a></p></td></tr></table></div><p> </p></th></tr></tbody></table></div><p> </p><p><h3 id="HowtoUsetheInverseDynamicsTool-TheControlPanel">The Control Panel</h3><p>At the bottom of all the Tool dialog windows are four buttons, located in what we call the <em>Control Panel</em>.</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="nohighlight confluenceTh"><img class="confluence-embedded-image" src="attachments/3376096/3736747.png" data-image-src="attachments/3376096/3736747.png"></th><th class="nohighlight confluenceTh"><ul><li>The <strong>Load and Save</strong> buttons are used to load or save settings for the tool. </li><li>The <strong>Run</strong> button starts execution. </li><li>The <strong>Close</strong> button closes the window.</li><li>The <strong>Help </strong>button takes you to the relevant section of the User Guide.</li></ul><div class='panelMacro'><table class='infoMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/information.png" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><p>Note that the <strong>Close</strong> button can be clicked immediately after execution has begun; the execution will complete even though the window has been closed.</p></td></tr></table></div><p> </p><ul><li>If you click <strong>Load…</strong>, you will be presented with a file browser that displays all files ending with the <strong>.xml</strong> suffix. You may browse for an appropriate settings file (e.g., <span style="color: rgb(0,128,0);"><strong>subject01_Forward_Setup.xml or subject01_Scale_Setup.xml)</strong></span>) and click <strong>Open</strong>. The tool will then be populated with the settings in that setup file.</li><li>If you have manually entered or modified settings, you may save those settings to a file for future use. If you click <strong>Save…</strong>, a Save dialog box will come up in which you can specify the name of the settings file. The name you specify for the file should have a suffix of <strong>.xml</strong>. Click <strong>Save</strong> to save the settings to file.</li><li><p>After you click <strong>Save</strong>, you may be presented with another dialog box that asks you whether or not you would like to save some of the settings to separate external files. This can be useful if you would like to reuse those settings for other trials or subjects. Check the boxes of the settings that you'd like to save to external files and specify the names of these files. All of these files should have a suffix of <strong>.xml</strong>.</p></li></ul></th></tr></tbody></table></div></p><h3 id="HowtoUsetheInverseDynamicsTool-MainSettingsPane">Main Settings Pane</h3><p><span>The </span><em>Main Settings</em><span> pane is used to specify parameters relating to the input kinematics of the current model, the time range for the analysis, and the output of the results. The pane is organized into four main sections entitled </span><em>Current Model, Input, Time,</em><span> and </span><em>Output</em><span>.</span></p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><td class="confluenceTd"><img class="confluence-embedded-image" src="attachments/3376167/3737013.png" data-image-src="attachments/3376167/3737013.png"></td><td class="confluenceTd"><ul><li>The section for <em>Input</em> displays editable information that allows you to specify the kinematics (e.g., states or motion) describing the movement of a model. </li><li>You may use the <img class="confluence-embedded-image" height="14" width="14" src="plugins/servlet/confluence/placeholder/unknown-attachment" title="worddav50ab2ffcc5bfe1f9f9298c68bbe7c46b.png"> radio button to select either <strong>From file</strong> or <strong>Loaded motion</strong> as the input type. </li><li>You may use the <img class="confluence-embedded-image" height="13" width="22" src="plugins/servlet/confluence/placeholder/unknown-attachment" title="worddav202d6a58244d8d4639d60ff5b8ee2d6c.png"> button to browse for the associated input file. </li><li>If you select the <img class="confluence-embedded-image" height="14" width="14" src="plugins/servlet/confluence/placeholder/unknown-attachment" title="worddav50ab2ffcc5bfe1f9f9298c68bbe7c46b.png"> radio button next to <strong>Loaded motion</strong>, you will need to choose a motion from the <img class="confluence-embedded-image" height="17" width="112" src="plugins/servlet/confluence/placeholder/unknown-attachment" title="worddavf6ab5291d8f6718b2412787b2138275e.png"> drop down list. </li></ul></td></tr><tr><td class="confluenceTd"><img class="confluence-embedded-image" src="attachments/3376167/3737012.png" data-image-src="attachments/3376167/3737012.png"></td><td class="confluenceTd"><ul><li>The section for <em>Time</em> displays editable information that allows you to specify the start and end time for the inverse dynamics analysis</li></ul></td></tr><tr><td class="confluenceTd"><img class="confluence-embedded-image" src="attachments/3376167/3737011.png" data-image-src="attachments/3376167/3737011.png"></td><td class="confluenceTd"><ul><li>The section for <em>Output</em> displays editable information that allows you to specify the directory to which the file is saved.</li><li>You may use the <img class="confluence-embedded-image" height="13" width="22" src="plugins/servlet/confluence/placeholder/unknown-attachment" title="worddav202d6a58244d8d4639d60ff5b8ee2d6c.png"> button to browse for and specify a directory in which to save the output files.</li><li>You may use the <img class="confluence-embedded-image" height="14" width="24" src="plugins/servlet/confluence/placeholder/unknown-attachment" title="worddavd2374ed113da078b95a2b6b1cd102516.png"> button to open an Explorer window to the specified directory.</li></ul></td></tr></tbody></table></div><p><span class="confluence-anchor-link" id="HowtoUsetheInverseDynamicsTool-ExternalLoads"></span></p><h3 id="HowtoUsetheInverseDynamicsTool-ExternalLoadsSpecification">External Loads Specification</h3><p>The <em>External Loads</em> pane is used to specify parameters relating to the external loads applied to the model during inverse dynamic analysis or in other tools (e.g. Forward Dynamics, or Computed Muscle Control, AnalyzeTool etc.). The section for <em>External Loads</em> is optional, and if checked, displays information that allows you to specify the external loads applied to the model and the corresponding kinematics of the external loads if needed. Additionally, there is an option to filter the kinematics for the external loads by selecting the check box next to <strong>Filter kinematics</strong> and entering the filter frequency. </p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="nohighlight confluenceTh"><img class="confluence-embedded-image" src="attachments/3376167/3737010.png" data-image-src="attachments/3376167/3737010.png"></th><th class="nohighlight confluenceTh"><ul><li><p>The file specified under <strong>External loads force specification file</strong> is an XML file that contains an ExternalLoads object.</p></li><li><p>The file can be created or edited by clicking the<strong> editor button </strong><img class="confluence-embedded-image" height="21" width="30" src="plugins/servlet/confluence/placeholder/unknown-attachment" title="worddav0bac4e7f7a60155bf974d91e93c2b0ef.png"> . </p></li></ul></th></tr><tr><td class="confluenceTd"><img class="confluence-embedded-image" src="attachments/3376167/3737009.png" data-image-src="attachments/3376167/3737009.png"></td><td class="confluenceTd"><ul><li>The External Forces editor dialog window shown on the left will appear when the <strong>editor button</strong> <img class="confluence-embedded-image" height="21" width="30" src="plugins/servlet/confluence/placeholder/unknown-attachment" title="worddav0bac4e7f7a60155bf974d91e93c2b0ef.png"> is clicked.</li><li>The <strong>Force data file</strong> specified at the top of this dialog window is a <em>.mot</em> or <em>.sto</em> file containing experimental data. The labels in this file have to be unique so that there's no ambiguity regarding which columns are used to define the forces. <br /><ul><li>In case the column labels are not unique, the OpenSim GUI will detect that and offer the option to overwrite or write a new file with unique labels. Earlier versions of OpenSim allowed for duplicate column names but this behavior has been deprecated. </li></ul></li><li>Next, you can specify the <strong>Kinematics for external loads</strong> file. <span>In general, you should leave this blank. </span><span style="color: rgb(34,34,34);">OpenSim will then use the specified </span><span class="il" style="color: rgb(34,34,34);">kinematics</span><span style="color: rgb(34,34,34);"> that are being tracked by ID, RRA, and CMC (e.g. </span><span class="il" style="color: rgb(34,34,34);">for ID for</span><span style="color: rgb(34,34,34);"> RRA it would be IK </span><span class="il" style="color: rgb(34,34,34);">kinematics</span><span style="color: rgb(34,34,34);">, and </span><span class="il" style="color: rgb(34,34,34);">for</span><span style="color: rgb(34,34,34);"> CMC it would be RRA </span><span class="il" style="color: rgb(34,34,34);">kinematics</span><span style="color: rgb(34,34,34);">).</span></li><li><span style="color: rgb(34,34,34);">Next, specify filtering options.</span></li><li>Next, specify any forces and torques that are applied to the model:<br /><ul><li>You can select any of the listed forces and/or torques for editing or deletion by choosing it and then clicking on the <strong>Edit…</strong> or <strong>Delete</strong> buttons, respectively. </li><li>Click on the <strong>Add…</strong> button to add a new force and/or torque to the list. </li><li>Choosing the <strong>Add…</strong> button opens the dialog window (Create/Edit ExternalForce) shown in the figure below.</li></ul></li><li>You must select <strong>Save…</strong> after you define your forces in order to write them to the XML file that will be used by the tool.</li></ul></td></tr><tr><td class="confluenceTd"><img class="confluence-embedded-image" src="attachments/3376167/3737008.png" data-image-src="attachments/3376167/3737008.png"></td><td class="confluenceTd"><p>Within the Create/Edit ExternalForce window, you can define either a <strong>Point Force</strong> or a <strong>Body Force</strong>. </p><ul><li><span style="color: rgb(34,34,34);"><span>A </span><strong>point force</strong><span> (most commonly used) is a force applied at a specified point and an optional torque. Using the drop down menu at the bottom of the window, you can specify the reference frames that the point and the force are expressed in.</span></span></li><li><span style="color: rgb(34,34,34);">A <strong>body force</strong> is a force applied to the origin of the body frame (not necessarily the CoM) and a required torque, for a total of six components. <span>By definition, a torque is a rotational &quot;force&quot; or moment so the point of application does not need to be specified. Thus for a body force, you should check applies force and applies torque. The selections in &quot;Point Columns&quot;, &quot;Force Expressed In&quot;, and &quot;Point Expressed In&quot; will be ignored. </span></span></li></ul><p>The drop-down menus for <strong>Force Columns</strong>, <strong>Point Columns</strong>, and <strong>Torque Columns</strong> allow you to specify which of the columns in the <strong>Force Data file</strong> are to be used to define the ExternalForce. Columns in the Force data file corresponding to the same force are assumed to live in adjacent columns and to have a common prefix that's used as an identifier for the corresponding ExternalForce. This common prefix is stored in the xml file as a &quot;<strong>force_identifier</strong>&quot;, similar rules apply for the &quot;<strong>point_identifier</strong>&quot; in case a point needs to be specified and &quot;<strong>torque_identifier</strong>&quot; for the case when a torque is also applied. Other attributes of the ExternalForce are:</p><ul><li>applied_to_body: specifies the name of the body that the ExternalForce is applied to.</li><li>Force Expressed In: specifies the frame in which the force is expressed (e.g. Force plate data is usually measured in lab/ground frame)</li><li>Point Expressed In: specifies the frame in which the point is expressed</li></ul></td></tr></tbody></table></div><p> </p><h2 id="HowtoUsetheInverseDynamicsTool-Command-lineExecution">Command-line Execution</h2><p>The Inverse Dynamics Tool is run using the command <strong>analyze -S &lt;setup file name&gt;,</strong> for example,</p><div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">id -S subject01_Setup_InverseDynamics.xml</pre>
		</div>
</div></div><div class="panel" style="background-color: white;border-color: gray;border-style: solid;border-width: 5px;"><div class="panelContent" style="background-color: white;">
<p>Next: <a href="ID%2BSettings%2BFiles%2Band%2BXML%2BTags.html">ID Settings Files and XML Tags</a></p><p>Previous: <a href="How%2BInverse%2BDynamics%2BWorks.html">How Inverse Dynamics Works</a></p><p>Home: <a href="Inverse%2BDynamics.html">Inverse Dynamics</a></p>
</div></div>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/3376167/3737015.png">ik-3.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/3376167/3737014.png">id-1.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/3376167/3737013.png">id-2.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/3376167/3737012.png">id-3.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/3376167/3737011.png">id-4.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/3376167/3737010.png">id-5.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/3376167/3737009.png">id-6.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/3376167/3737008.png">id-7.PNG</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" style="background: url(http://simtk-confluence.stanford.edu:8080/images/border/border_bottom.gif) repeat-x;">
                <p><small>Document generated by Confluence on Feb 24, 2014 09:27</small></p>
            </div>
        </div>     </body>
</html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>OpenSim Documentation : Function Editor</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body>
        <div id="page">
            <div id="main">
                <div id="main-header" class="pageSectionHeader">
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            OpenSim Documentation : Function Editor
                        </span>
                    </h1>

                    <div class="page-metadata">
                        <p>This page last changed on Oct 10, 2012 by <font color="#0050B2">kevinxu</font>.</p>
                    </div>
                </div>

                <div id="content" class="view">
                    <div id="main-content" class="wiki-content group">
                    <p>The Function Editor allows you to view and modify the parameters of a model that are functions, such as the force-length curve of a muscle or a joint constraint function. The functions are defined using control points and a function type. You can add, delete, and move control points if the function is defined by a set of control points, for other types of functions, the function editor displays the textual attributes of the function only for editing (e.g. constant function is displayed a s text field representing the value, while a linear function displays the slope and intercept).  The topics covered in this chapter are:</p><p><div>
<ul>
    <li><a href='#FunctionEditor-OpeningtheFunctionEditor'>Opening the Function Editor</a></li>
<ul>
    <li><a href='#FunctionEditor-OpeningtheEditorforaJointConstraintFunction'>Opening the Editor for a Joint Constraint Function</a></li>
    <li><a href='#FunctionEditor-OpeningtheEditorforMusclePropertyFunctions'>Opening the Editor for Muscle Property Functions</a></li>
    <li><a href='#FunctionEditor-OpeningtheEditorforMovingMusclePoints'>Opening the Editor for Moving Muscle Points</a></li>
</ul>
    <li><a href='#FunctionEditor-Restoring'>Restoring</a></li>
    <li><a href='#FunctionEditor-EditingControlPoints'>Editing Control Points</a></li>
    <li><a href='#FunctionEditor-ZoominginthePlotArea'>Zooming in the Plot Area</a></li>
    <li><a href='#FunctionEditor-PlotProperties'>Plot Properties</a></li>
</ul></div></p><h2 id="FunctionEditor-OpeningtheFunctionEditor">Opening the Function Editor</h2><div class="wiki-content"><p> </p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="nohighlight confluenceTh"><img class="confluence-embedded-image" width="300" src="attachments/3376207/3737259.png" data-image-src="attachments/3376207/3737259.png"></th><th class="nohighlight confluenceTh"><p>The Function Editor window is opened by locating the function you want to modify and choosing the edit option (e.g. knee_r Joint translation in gait2354 model). This will open the Function Editor window and load the function into it.</p><p>Once the window is open, you cannot select another function to edit from within the Function Editor window. You must close the window, locate the other function in the Navigator or other model editing tool and choose the edit option for that function. Doing so will close the function that is currently in the Function Editor (saving all changes), and will load the new function. </p></th></tr></tbody></table></div><h3 id="FunctionEditor-OpeningtheEditorforaJointConstraintFunction">Opening the Editor for a Joint Constraint Function</h3><p>To edit a joint constraint function associated with a degree of freedom (DOF) follow the steps below. In this example, the translation1 DOF (the X translation) in the femoral-tibial joint is a function of the coordinate r_knee_angle. Right-clicking on the coordinate name brings up a drop-down menu.  Choosing &quot;…&quot; next to the function property in the &quot;Properties window&quot; allows you to load the function into the Function Editor.</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="nohighlight confluenceTh"><img class="confluence-embedded-image" width="300" src="attachments/3376207/3737261.png" data-image-src="attachments/3376207/3737261.png"></th><th class="nohighlight confluenceTh"><ol><li><p>Locate the DOF in the Navigator window</p></li><li><p>Click on the <strong>plus</strong> <strong><img class="emoticon emoticon-plus" src="s/en_GB/3281/1/_/images/icons/emoticons/add.png" data-emoticon-name="plus" alt="(plus)"/></strong> sign next to the name of the current model to display the model components.</p></li><li><p>Click on the <strong>plus</strong> <strong><img class="emoticon emoticon-plus" src="s/en_GB/3281/1/_/images/icons/emoticons/add.png" data-emoticon-name="plus" alt="(plus)"/> </strong>sign next to Joints<strong>.</strong></p></li><li><p>Click on the<strong> plus</strong> <img class="emoticon emoticon-plus" src="s/en_GB/3281/1/_/images/icons/emoticons/add.png" data-emoticon-name="plus" alt="(plus)"/> sign next to the name of the appropriate joint.</p></li><li><p>Click on the <strong>plus</strong> <img class="emoticon emoticon-plus" src="s/en_GB/3281/1/_/images/icons/emoticons/add.png" data-emoticon-name="plus" alt="(plus)"/> sign next to Dofs.</p></li><li><p>From the property viewer, click on the <strong>... button</strong> on the right of the function.</p></li><li><p>The Function Editor window (shown above) will be opened where you can load the function you want to view and modify.</p></li></ol></th></tr></tbody></table></div><h3 id="FunctionEditor-OpeningtheEditorforMusclePropertyFunctions">Opening the Editor for Muscle Property Functions</h3><p>To edit the force-length curve or other property functions of a muscle, first load the muscle into the <a href="Muscle%2BEditor.html">Muscle Editor</a>. In the Muscle Editor, click on the <strong><em>... </em>button</strong> next to the function property to load the function into the Function Editor.</p><h3 id="FunctionEditor-OpeningtheEditorforMovingMusclePoints">Opening the Editor for Moving Muscle Points</h3><p>To edit the functions that define the movement of moving muscle points, first load the muscle into the <a href="Muscle%2BEditor.html">Muscle Editor</a>. Then, click on the <em>Attachments</em> tab to display the list of the muscle's attachment points. For moving muscle points, the XYZ columns will contain <strong>Edit</strong> buttons. Click on one to load that component's function into the Function Editor.</p><h2 id="FunctionEditor-Restoring">Restoring</h2><p>When you modify a function in the Function Editor, the modification occurs immediately to the function stored in the model. You do not need to apply the change to make it happen, nor can you cancel the change before it takes effect. To allow you to undo changes made to a function, there is one &quot;restore function&quot; buttons at the bottom of the Function Editor window that undoes all the changes made to the function by the function editor. When you first load a function into the Function Editor, a backup copy of it is made, so you can restore it without having to back it up first. </p><h2 id="FunctionEditor-EditingControlPoints">Editing Control Points</h2><p>Controls points are used to define the shape of some functions. The following operations are possible when working with control points:</p><p><span style="color: rgb(128,0,0);"><strong>select:</strong></span> To select a control point, use <strong>ctrl+left mouse</strong> on the point. To select multiple points, use <strong>ctrl+shift+left mouse</strong> on the points. You can also &quot;box select&quot; points by holding down the <strong>ctrl+left mouse</strong> button and dragging the cursor to form the selection box. You can also hold down the <strong>shift</strong> key while box selecting to select multiple sets of control points. Selected control points are displayed in yellow.</p><p><span style="color: rgb(128,0,0);"><strong>add: </strong></span> To add a control point to the function, put the cursor where you would like to add the point and press the <strong>right mouse</strong> button. Choose <strong>Add control point</strong> from the drop down menu that appears, and a new point will be added to the function.</p><p><span style="color: rgb(128,0,0);"><strong>delete: </strong></span>To delete a control point, put the cursor over the point and press the <strong>right mouse</strong> button. Choose <strong>Delete control point</strong> from the drop down menu.</p><p><span style="color: rgb(153,51,0);"><strong>duplicate</strong></span> <span style="color: rgb(128,0,0);"><strong>point: </strong></span> To duplicate a control point, put the cursor over the point you would like to duplicate, and press the <strong>right mouse</strong> button. Choose <strong>Duplicate control point</strong> from the drop down menu. A very small offset will be added to the point in the X direction, so that it is not exactly coincident with the chosen point. This is done because many types of functions require the control points to be monotonically increasing in the X direction.</p><p><span style="color: rgb(128,0,0);"><strong>move point: </strong></span> Select one or more control points. Then, put the cursor over any of the selected points and press the <strong>left mouse</strong> button. While holding the button down, <strong>drag</strong> the set of points within the plot area. You cannot move the points over one of the adjacent points (i.e., the points in the X direction must always be monotonically increasing).</p><p>While you are dragging control points, crosshairs are displayed along with the XY coordinates of the control point under the cursor. Because the displayed coordinates are for the control point, not the actual location of the tip of the cursor, they can help you more accurately position the control point while dragging.</p><p>To more precisely move a control point, you can select it and then type its XY coordinates into the <strong>X and Y number fields</strong> below the plot area. When there are multiple points selected, you can type in a Y value to set all selected points to that value, but you cannot set the X value (because that would create coincident points).</p><h2 id="FunctionEditor-ZoominginthePlotArea">Zooming in the Plot Area</h2><p>The plot area that displays the function and its control points normally auto-scales to show all of the points. However, if you want to pan or zoom the view to focus on a particular area, there are several ways you can do this.</p><ul><li><strong>Select a rectangular area</strong> <span style="color: rgb(0,0,128);">–</span> To select a rectangular area to zoom in on, press the <strong>left mouse</strong> button at the upper-left corner of the rectangle, and hold it down while sweeping down (<strong>dragging</strong>) to the lower-right corner. When you release the left mouse button, the rectangle you defined will be expanded to fit the entire plot area.</li></ul><ul><li><strong>Hot keys</strong> <span style="color: rgb(0,0,128);">–</span> Press the <strong>i</strong> and <strong>o</strong> keys to zoom the view in or out, respectively. The zooming is centered on the current cursor location. To pan the view of the function, use the <strong>l, r, u,</strong> and <strong>d</strong> keys to move it left, right, up, and down, respectively.</li></ul><ul><li><strong>Dialog box</strong><span style="color: rgb(0,0,128);">–</span> For more precise control over the zooming of the plot, click on the <strong>Properties</strong> button at the bottom of the Function Editor. In the dialog box for<strong> <a href="Function%2BEditor.html">Plot Properties</a></strong> that appears, click on the <strong><em>Plot</em></strong> tab and then on either the <strong><em>X Axis</em></strong> or the <strong><em>Y Axis</em></strong> tab. In the lower panel labeled <em>Other</em>, click on the <strong><em>Range</em></strong> tab to display the minimum and maximum values for the axis. Turn off the <strong>Auto-adjust Range</strong> checkbox if it is not already off, and then enter the exact minimum and maximum values you would like to use for that axis.</li></ul><h2 id="FunctionEditor-PlotProperties">Plot Properties</h2><p>The Plot Properties dialog box gives you access to many properties for plotting the function. Shown here are the minimum and maximum values for the Y axis. To make the Function Editor auto-scale the Y axis to display all of the control points, turn on the <strong>Auto-adjust Range</strong> checkbox.</p><p><span class="confluence-anchor-link" id="FunctionEditor-PlotProperties"></span></p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="nohighlight confluenceTh"><img class="confluence-embedded-image" width="300" src="attachments/3376207/3737260.png" data-image-src="attachments/3376207/3737260.png"></th><th class="nohighlight confluenceTh"><ul><li><p>To undo any of the user-defined zooming and panning commands and return the plot to auto-scaling mode, you can either turn on the <strong>Auto-adjust Range</strong> checkboxes for the X axis and the Y axis (see details for the Plot Properties dialog box above), or you can <strong>rectangle-zoom in the opposite direction</strong> in the plot area—that is, while holding down the left mouse button, drag the cursor from the lower-right to the upper-left.</p></li><li><p>When you release the left mouse button, the plot will auto-scale to show all of the control points.</p></li></ul></th></tr></tbody></table></div><p><strong><br /></strong></p><div class="panel" style="background-color: white;border-color: gray;border-style: solid;border-width: 5px;"><div class="panelContent" style="background-color: white;">
<p>Next: <a href="Excitation%2BEditor.html">Excitation Editor</a> </p><p>Previous: <a href="Function%2BEditor.html">Function Editor</a></p><p>Home: <a href="Model%2BEditing.html">Model Editing</a></p>
</div></div></div>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/3376207/3737261.png">function-2.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/3376207/3737260.png">function-3.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/3376207/3737259.png">function-1.PNG</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" style="background: url(http://simtk-confluence.stanford.edu:8080/images/border/border_bottom.gif) repeat-x;">
                <p><small>Document generated by Confluence on Feb 24, 2014 09:27</small></p>
            </div>
        </div>     </body>
</html>

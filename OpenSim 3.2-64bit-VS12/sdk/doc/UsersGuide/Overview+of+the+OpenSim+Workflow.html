<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>OpenSim Documentation : Overview of the OpenSim Workflow</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body>
        <div id="page">
            <div id="main">
                <div id="main-header" class="pageSectionHeader">
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            OpenSim Documentation : Overview of the OpenSim Workflow
                        </span>
                    </h1>

                    <div class="page-metadata">
                        <p>This page last changed on Jan 30, 2014 by <font color="#0050B2">jenhicks</font>.</p>
                    </div>
                </div>

                <div id="content" class="view">
                    <div id="main-content" class="wiki-content group">
                    <p>OpenSim has a broad range of capabilities for generating and analyzing musculoskeletal models and dynamic simulations. This chapter provides an overview of these capabilities and a list of resources to find more information about each component of the OpenSim workflow.</p><h2 id="OverviewoftheOpenSimWorkflow-TheOpenSimModel">The OpenSim Model</h2><p>One of the major goals of the OpenSim project is to provide a common platform for creating and sharing models of the musculoskeletal system. Thus, the first component of any analysis is an OpenSim model. An OpenSim model represents the dynamics of a system of rigid bodies and joints that are acted upon by forces to produce motion. The OpenSim model file is made up of components corresponding to parts of the physical system. These parts include bodies, joints, forces, constraints, and controllers.</p><p>Additional information is also available in the section on <a href="OpenSim%2BModels.html">OpenSim Models</a>. A large repository of existing models is available at SimTK.org (<a href="https://simtk.org/home/nmblmodels" class="external-link" rel="nofollow">https://simtk.org/home/nmblmodels</a>). This library includes models of the lower extremity, head and neck, spine, and wrist. We encourage you to contribute your own models to this library to enable other researchers to build on your work and further advance the field. For example, in a model used for simulation of human walking, the bodies represent the geometry and inertial properties of the body segments. The joints specify the articulations at the pelvis, hip, knee, and ankle joints, while a constraint could be used, for example, to couple the motion of the patella with the model’s knee flexion angle. The forces in the model include both internal forces from muscles and ligaments and external forces from interaction with the ground. Finally, the model’s controller determines the activation of muscles (e.g., computed muscle control).</p><h2 id="OverviewoftheOpenSimWorkflow-ImportingExperimentalData">Importing Experimental Data</h2><p>In many cases, you will use OpenSim to analyze experimental data that you have collected in your laboratory. This data typically includes:</p><ul><li>Marker trajectories or joint angles from motion capture</li><li>Force data, typically ground reaction forces and moments and/or centers of pressure</li><li>Electromyography</li></ul><p>See <a href="Preparing%2BYour%2BData.html">Preparing Your Data</a> for detailed information about preparing and importing your experimental data.</p><h2 id="OverviewoftheOpenSimWorkflow-Scaling">Scaling</h2><p align="left">If you are using a generic model from the existing library of models, the next step is to scale the model to match the experimental data collected for your subject—functionality provided by the Scale Tool in OpenSim. The purpose of scaling a generic musculoskeletal model is to modify the anthropometry, or physical dimensions, of the generic model so that it matches the anthropometry of a particular subject. Scaling is one of the most important steps in solving inverse kinematics and inverse dynamics problems because these solutions are sensitive to the accuracy of the scaling step. In OpenSim, the scaling step adjusts both the mass properties (mass and inertia tensor), as well as the dimensions of the body segments.</p><p>See the section on <a href="Scaling.html">Scaling</a> for more details. <a href="http://simtk-confluence.stanford.edu:8080/pages/viewpage.action?pageId=3376124">Tutorial 3 - Scaling, Inverse Kinematics, and Inverse Dynamics (old)</a> includes an example using the Scale Tool. This tutorial is also accessible from the OpenSim application Help menu.</p><h2 id="OverviewoftheOpenSimWorkflow-TheInverseProblem">The Inverse Problem</h2><p>OpenSim enables researchers to solve the Inverse Dynamics problem, using experimental measured subject motion and forces to generate the kinematics and kinetics of a musculoskeletal model (see figure below).</p><p align="center" style="text-align: left;"><img class="confluence-embedded-image" width="500" src="attachments/3376202/3737213.png" data-image-src="attachments/3376202/3737213.png" title="Workflow2.png"></p><p>In inverse dynamics, experimentally measured marker trajectories and force data are use to estimate a model’s kinematics and kinetics.</p><h3 id="OverviewoftheOpenSimWorkflow-InverseKinematics">Inverse Kinematics</h3><p>The Inverse Kinematics (IK) Tool in OpenSim finds values for the generalized coordinates (joint angles and positions) in the model that best match the experimental kinematics recorded for a particular subject (see figure below). The experimental kinematics targeted by IK can include experimental marker positions, as well as experimental generalized coordinate values (joint angles)<em>.</em> The IK Tool goes through each time step of motion and computes generalized coordinate values which position the model in a pose that &quot;best matches&quot; experimental marker and coordinate values for that time step. Mathematically, the &quot;best match&quot; is expressed as a weighted least-squares problem, whose solution aims to minimize both marker and coordinate errors.<br class="atl-forced-newline" /> <br class="atl-forced-newline" /> <br class="atl-forced-newline" /> <img class="confluence-embedded-image" height="210" width="312" src="attachments/3376202/3737218.png" data-image-src="attachments/3376202/3737218.png" title="worddavefc69623dd8435e662b77e66ad9b8209.png [imported from a Word document]"><br />Experimental markers are matched by model markers throughout the motion by varying the generalized coordinates (e.g., joint angles) through time. See <a href="Inverse%2BKinematics.html">Inverse Kinematics</a> for full documentation on running IK in OpenSim. <a href="http://simtk-confluence.stanford.edu:8080/pages/viewpage.action?pageId=3376124">Tutorial 3 - Scaling, Inverse Kinematics, and Inverse Dynamics (old)</a> walks through an example of using Inverse Kinematics for human walking.</p><h3 id="OverviewoftheOpenSimWorkflow-InverseDynamics">Inverse Dynamics</h3><p><em>Dynamics</em> is the study of motion <em>and</em> the forces and moments that produce that motion. The Inverse Dynamics (ID) Tool determines the generalized forces (e.g., net forces and torques) that cause a particular motion, and its results can be used to infer how muscles are actuated to generate that motion. To determine these internal forces and moments, the equations of motion for the system are solved with external forces (e.g., ground reaction forces) and accelerations given (estimated by differentiating angles and positions twice). The equations of motion are automatically formulated using the kinematic description and mass properties of a musculoskeletal model in Simbody™.</p><p>See <a href="Inverse%2BDynamics.html">Inverse Dynamics</a> for full documentation on running ID in OpenSim. <a href="http://simtk-confluence.stanford.edu:8080/pages/viewpage.action?pageId=3376124">Tutorial 3 - Scaling, Inverse Kinematics, and Inverse Dynamics (old)</a> walks through an example of using ID for human walking.</p><h3 id="OverviewoftheOpenSimWorkflow-StaticOptimization">Static Optimization</h3><p>Static optimization is an extension of inverse dynamics that further resolves the net joint moments into individual muscle forces at each instant in time based on some performance criteria, like minimizing the sum of squared muscle forces. See <a href="Static%2BOptimization.html">Static Optimization</a> for more details.</p><h2 id="OverviewoftheOpenSimWorkflow-Toc174680178TheForwardProblem"><span class="confluence-anchor-link" id="OverviewoftheOpenSimWorkflow-Toc174680178"></span>The Forward Problem</h2><p>OpenSim is also capable of generating muscle-driven forward simulations of gait and other movements (see figure below).<br /> <img class="confluence-embedded-image" height="72" width="599" src="attachments/3376202/3737217.png" data-image-src="attachments/3376202/3737217.png" title="worddav3781d00747989b35b940eaecc09f3078.png [imported from a Word document]"></p><p>In a forward dynamic simulation of motion, simulated muscle excitations are used to drive the motion of a model to follow some observed movement.</p><p>The Forward Dynamics Tool takes a set of controls (e.g., muscle excitations) to drive a model's motion by integrating forward in time. Typically, muscle excitations are generated using the Computed Muscle Control (CMC) Tool. As a pre-cursor to running CMC, the Residual Reduction Algorithm (RRA) is used to minimize the effects of modeling and marker data processing errors that aggregate and lead to large nonphysical compensatory forces called &quot;residuals&quot;. Specifically, RRA alters the torso mass center of a subject-specific model and permits the kinematics of the model from inverse kinematics to vary in order to be more dynamically consistent with the ground reaction force data. Thus, the typical workflow for generating a muscle-driven simulation after importing experimental data is Scale → IK → RRA → CMC → Forward Dynamics (see figure below).</p><p><img class="confluence-embedded-image" height="289" width="516" src="attachments/3376202/3737216.png" data-image-src="attachments/3376202/3737216.png" title="worddavb8f6a339c614392ea6696dde86146e40.png [imported from a Word document]"></p><p>Full documentation of <a href="Forward%2BDynamics.html">Forward Dynamics</a>, the <a href="Residual%2BReduction%2BAlgorithm.html">Residual Reduction Algorithm</a>, and <a href="Computed%2BMuscle%2BControl.html">Computed Muscle Control</a> is available in the respective sections.</p><h2 id="OverviewoftheOpenSimWorkflow-AnalyzingSimulations">Analyzing Simulations</h2><p>Answering your research questions often requires delving deeper into the details of a simulation. Thus, OpenSim includes an Analyze Tool that allows you to estimate, for example, muscle fiber or tendon lengths during a motion, or the loads on the knee joint. The Analyze Tool enables you to analyze a model or simulation based on a number of inputs that can include time histories of model states, controls, and external loads applied to the model. The following analyses are available in OpenSim:</p><ol><li><strong>Body Kinematics</strong>: Reports the spatial kinematics (position and orientation, linear and angular velocity, linear and angular acceleration) of specified bodies for the duration of the analysis.</li><li><strong>Point Kinematics</strong>: Reports the global position, velocity and acceleration of a point defined local to a body during a simulation.</li><li><strong>Muscle Analysis</strong>: Reports all attributes of all muscles (including fiber length and velocity, normalized fiber length, pennation angle, active-fiber force, passive-fiber force, tendon force, and more).</li><li><strong>Joint Reactions</strong>: Reports joint reaction forces. These are forces that enforce the motion of the joint. The force applied to either parent or child and expressed relative to ground, parent or child can be reported.</li><li><strong>Induced Acceleration</strong>: Computes accelerations caused or &quot;induced&quot; by individual forces acting on a model—for example, the contribution of individual muscle forces to the mass center acceleration.</li><li><strong>Force Reporter</strong>: Reports all forces acting in the model. For ligaments and muscles, the tension along the path is reported; for ideal actuators, the scalar force or torque is reported. For all other forces, the resultant body forces (force and moment acting at the center of mass of the body) are reported. For example, contact forces from an ElasticFoundationForce element yield the resultant body force on the contacting bodies separately, expressed in the ground frame. For constraints, the same is true, except the forces are expressed relative to the most distal common ancestor body. Whenever a constraint involves ground, this is the ground body; however, if (for example) a model of the arm has a hand with fingers touching via a point constraint, then the forces are expressed in the nearest common ancestor, which would be the palm (if modeled as a single body).</li></ol><p>More details about the analyses available in OpenSim are available in the sections <a href="Analyses.html">Analyses</a>, <a href="Joint%2BReactions%2BAnalysis.html">Joint Reactions Analysis</a>, and <a href="Induced%2BAcceleration%2BAnalysis.html">Induced Acceleration Analysis</a>.</p><div class="panel" style="background-color: white;border-color: gray;border-style: solid;border-width: 5px;"><div class="panelContent" style="background-color: white;">
<p>Next: <a href="Preparing%2BYour%2BData.html">Preparing Your Data</a></p>
</div></div><p><br /><br /></p>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/3376202/3737218.png">worddavefc69623dd8435e662b77e66ad9b8209.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/3376202/3737217.png">worddav3781d00747989b35b940eaecc09f3078.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/3376202/3737216.png">worddavb8f6a339c614392ea6696dde86146e40.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/3376202/3737213.png">Workflow2.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" style="background: url(http://simtk-confluence.stanford.edu:8080/images/border/border_bottom.gif) repeat-x;">
                <p><small>Document generated by Confluence on Feb 24, 2014 09:27</small></p>
            </div>
        </div>     </body>
</html>

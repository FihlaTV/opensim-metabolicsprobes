<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>OpenSim Documentation : How to Use the IK Tool</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body>
        <div id="page">
            <div id="main">
                <div id="main-header" class="pageSectionHeader">
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            OpenSim Documentation : How to Use the IK Tool
                        </span>
                    </h1>

                    <div class="page-metadata">
                        <p>This page last changed on Oct 09, 2012 by <font color="#0050B2">kevinxu</font>.</p>
                    </div>
                </div>

                <div id="content" class="view">
                    <div id="main-content" class="wiki-content group">
                    <p>The topics covered in this section include:</p><p><div>
<ul>
    <li><a href='#HowtoUsetheIKTool-HowtoUsetheGUI'>How to Use the GUI</a></li>
<ul>
    <li><a href='#HowtoUsetheIKTool-TheControlPanel'>The Control Panel</a></li>
    <li><a href='#HowtoUsetheIKTool-SettingsPane'>Settings Pane</a></li>
    <li><a href='#HowtoUsetheIKTool-WeightsPane'>Weights Pane</a></li>
    <li><a href='#HowtoUsetheIKTool-TheControlPanel'>The Control Panel</a></li>
</ul>
    <li><a href='#HowtoUsetheIKTool-CommandLineExecutionofIK'><span><span>Command Line Execution of IK</span></span></a></li>
</ul></div></p><h2 id="HowtoUsetheIKTool-HowtoUsetheGUI">How to Use the GUI</h2><p>To launch the IK Tool:</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="nohighlight confluenceTh"><img class="confluence-embedded-image" width="500" src="attachments/3376170/3737039.png" data-image-src="attachments/3376170/3737039.png"></th><th class="nohighlight confluenceTh"><p><span style="color: rgb(0,0,0);">Select <strong>Tools</strong> → <strong>Inverse Kinematics</strong> from the OpenSim main menu bar.</span></p><p><span style="color: rgb(0,0,0);">The <em>Settings</em> pane is used to specify parameters related to the experimental marker data. The <em>Weights</em> pane is used to specify the marker and coordinate weights used in the weighted least squares equation.</span></p><p><span style="color: rgb(0,0,0);"><br /></span></p><p><span style="color: rgb(0,0,0);"><br /></span></p></th></tr></tbody></table></div><p>The <strong>Inverse Kinematics Tool</strong> window, like all other OpenSim tools, operates on the current model. The name of the current model is shown in bold in the Navigator window. Any model can be made the current model by <strong>right-clicking</strong> on its name and selecting <strong>Make Current</strong>. See <a href="Opening%252C%2BClosing%252C%2Band%2BUsing%2Bthe%2BNavigator%2BWindow.html">Opening, Closing, and Using the Navigator Window</a> for information on opening models and making a particular model current.</p><p><h3 id="HowtoUsetheIKTool-TheControlPanel">The Control Panel</h3><p>At the bottom of all the Tool dialog windows are four buttons, located in what we call the <em>Control Panel</em>.</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="nohighlight confluenceTh"><img class="confluence-embedded-image" src="attachments/3376096/3736747.png" data-image-src="attachments/3376096/3736747.png"></th><th class="nohighlight confluenceTh"><ul><li>The <strong>Load and Save</strong> buttons are used to load or save settings for the tool. </li><li>The <strong>Run</strong> button starts execution. </li><li>The <strong>Close</strong> button closes the window.</li><li>The <strong>Help </strong>button takes you to the relevant section of the User Guide.</li></ul><div class='panelMacro'><table class='infoMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/information.png" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><p>Note that the <strong>Close</strong> button can be clicked immediately after execution has begun; the execution will complete even though the window has been closed.</p></td></tr></table></div><p> </p><ul><li>If you click <strong>Load…</strong>, you will be presented with a file browser that displays all files ending with the <strong>.xml</strong> suffix. You may browse for an appropriate settings file (e.g., <span style="color: rgb(0,128,0);"><strong>subject01_Forward_Setup.xml or subject01_Scale_Setup.xml)</strong></span>) and click <strong>Open</strong>. The tool will then be populated with the settings in that setup file.</li><li>If you have manually entered or modified settings, you may save those settings to a file for future use. If you click <strong>Save…</strong>, a Save dialog box will come up in which you can specify the name of the settings file. The name you specify for the file should have a suffix of <strong>.xml</strong>. Click <strong>Save</strong> to save the settings to file.</li><li><p>After you click <strong>Save</strong>, you may be presented with another dialog box that asks you whether or not you would like to save some of the settings to separate external files. This can be useful if you would like to reuse those settings for other trials or subjects. Check the boxes of the settings that you'd like to save to external files and specify the names of these files. All of these files should have a suffix of <strong>.xml</strong>.</p></li></ul></th></tr></tbody></table></div></p><h3 id="HowtoUsetheIKTool-SettingsPane">Settings Pane</h3><p>The <em>Settings</em> pane is used to specify parameters related to the experimental marker data. The pane is organized into two main sections: <em>Current Model</em> and <em>IK Trial</em>.</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="nohighlight confluenceTh"><img class="confluence-embedded-image" width="500" src="attachments/3376170/3737039.png" data-image-src="attachments/3376170/3737039.png"></th><th class="nohighlight confluenceTh" colspan="1"><ul><li><span style="color: rgb(0,0,0);">The section for </span><em>Current Model</em><span style="color: rgb(0,0,0);"> displays uneditable information about the current model. It gives the model name, as well as the number of markers associated with the model. Inverse kinematics requires that a marker set is associated with the model. This association with a subject-specific model is established at the time that a generic model is scaled to the subject markers visit </span><span style="color: rgb(0,0,255);"><a href="Scaling.html"><span style="color: rgb(0,0,255);">Scaling</span></a></span><span style="color: rgb(0,0,0);"> for more information.</span></li><li><span style="color: rgb(0,0,0);">The </span><em>IK Trial</em><span style="color: rgb(0,0,0);"> section specifies the experimental marker data that the IK Tool will match with the current model. </span><ul><li><span style="color: rgb(0,0,0);">The </span><strong>Marker data for trial</strong><span style="color: rgb(0,0,0);"> field contains the path to the marker data (in .trc format). Information from the file, such as the number of markers, the number of frames and the sampling frequency, as well as the start and end times of the data set, are reported in the </span><em>Marker Data</em><span style="color: rgb(0,0,0);"> box on the right-hand side. </span></li><li><span style="color: rgb(0,0,0);">You can specify the time range for performing inverse kinematics in the </span><strong>Time range</strong><span style="color: rgb(0,0,0);"> field. By default, the complete time range is used. </span></li><li><span style="color: rgb(0,0,0);">If you are using experimental generalized coordinate values in the IK trial, check the </span><strong>Coordinate data for trial</strong><span style="color: rgb(0,0,0);"> checkbox and then specify the motion (.mot) file with the coordinate values in the textbox to the right.</span></li></ul></li></ul></th></tr></tbody></table></div><h3 id="HowtoUsetheIKTool-WeightsPane">Weights Pane</h3><p>Once a marker and possibly a coordinate file have been specified, the specific behavior of the inverse kinematics tool can be described and modified using the <em>Weights</em> pane (Figure below). Each entry in the table represents a task in the least-squares matching for either a marker (top table) or a coordinate (lower table). By <strong>left-clicking</strong> on a row, you select it, making the entry fields below the tables editable so you can specify weights and values for the selected marker(s) or coordinate(s). You can select multiple rows to edit by using <strong>ctrl + left-mouse-click</strong> or <strong>shift + left-mouse-click</strong>.</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="nohighlight confluenceTh"><img class="confluence-embedded-image" width="500" src="attachments/3376170/3737038.png" data-image-src="attachments/3376170/3737038.png"></th><th class="nohighlight confluenceTh" colspan="1"><ul><li><p>The weight value affects to what degree a match should be satisfied.</p></li><li><p>Larger weightings penalize errors for that marker or coordinate more heavily and thus should match the experimental value more closely (see <a href="How%2BInverse%2BKinematics%2BWorks.html">How Inverse Kinematics Works</a>).</p></li><li><p>For coordinates, the coordinate value to be matched can come from a specified motion file, be set to its default value, or be set to a user-specified (<em>manual</em>) value.</p></li></ul><div class='panelMacro'><table class='infoMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/information.png" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><span>When running the IK Tool using the GUI, the results are not automatically saved to a file. They are associated with the model under its </span><strong>Motions</strong><span> node in the Navigator window (</span><a href="Navigator%2BWindow.html">Navigator Window</a><span>). You can view multiple IK results before saving them to a file. To save the IK results to a file, </span><strong>right click</strong><span> on the motion in the Navigator window and select </span><strong>Save as</strong><span>.</span></td></tr></table></div><p> </p></th></tr></tbody></table></div><h3 id="HowtoUsetheIKTool-TheControlPanel">The Control Panel</h3><p>The <em>control panel</em> at the bottom of the dialog window is used to save the settings in the dialog to a file, read the settings from a file, and to run IK. It has the same behavior as described in <a href="Scale%2BSetup%2BFile.html">Scale Setup File</a><span><span> </span></span></p><h2 id="HowtoUsetheIKTool-CommandLineExecutionofIK"><span><span>Command Line Execution of IK</span></span></h2><p>The Inverse Kinematics Tool is run using the command <strong>ik -S &lt;setup file name&gt;</strong>, for example:</p><div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">ik -S subject01_Setup_IK.xml </pre>
		</div>
</div></div><div class="panel" style="background-color: white;border-color: gray;border-style: solid;border-width: 5px;"><div class="panelContent" style="background-color: white;">
<p>Next: <a href="IK%2BSettings%2BFiles%2Band%2BXML%2BTag%2BDefinitions.html">IK Settings Files and XML Tag Definitions</a></p><p>Previous: <a href="How%2BInverse%2BKinematics%2BWorks.html">How Inverse Kinematics Works</a></p><p>Home: <a href="Inverse%2BKinematics.html">Inverse Kinematics</a></p>
</div></div>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/3376170/3737041.png">worddav81d5f61c602bdfb35ee9d49ff330780d.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/3376170/3737040.png">worddav1d79b0e54c0fa4d25a3fb886afe069b6.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/3376170/3737039.png">ik-1.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/3376170/3737038.png">ik-2.PNG</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" style="background: url(http://simtk-confluence.stanford.edu:8080/images/border/border_bottom.gif) repeat-x;">
                <p><small>Document generated by Confluence on Feb 24, 2014 09:27</small></p>
            </div>
        </div>     </body>
</html>

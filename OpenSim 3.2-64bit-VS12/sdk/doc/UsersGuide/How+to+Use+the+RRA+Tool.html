<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>OpenSim Documentation : How to Use the RRA Tool</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body>
        <div id="page">
            <div id="main">
                <div id="main-header" class="pageSectionHeader">
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            OpenSim Documentation : How to Use the RRA Tool
                        </span>
                    </h1>

                    <div class="page-metadata">
                        <p>This page last changed on Oct 10, 2012 by <font color="#0050B2">kevinxu</font>.</p>
                    </div>
                </div>

                <div id="content" class="view">
                    <div id="main-content" class="wiki-content group">
                    <p>The topics covered in this section include:</p><p><div>
<ul>
    <li><a href='#HowtoUsetheRRATool-HowtoUsetheGUI'>How to Use the GUI</a></li>
<ul>
    <li><a href='#HowtoUsetheRRATool-TheControlPanel'>The Control Panel</a></li>
    <li><a href='#HowtoUsetheRRATool-ConfiguringtheRRATool'>Configuring the RRATool</a></li>
    <li><a href='#HowtoUsetheRRATool-ReplacingModelActuators'>Replacing Model Actuators</a></li>
</ul>
    <li><a href='#HowtoUsetheRRATool-Command-lineExecution'>Command-line Execution</a></li>
</ul></div></p><h2 id="HowtoUsetheRRATool-HowtoUsetheGUI">How to Use the GUI</h2><p>The computed muscle control tool is accessed by selecting <strong>Tools → Reduce Residuals …</strong> from the OpenSim menu. The RRA Tool is governed by three tabs: </p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="nohighlight confluenceTh"><img class="confluence-embedded-image" src="attachments/3376196/3737162.png" data-image-src="attachments/3376196/3737162.png"></th><th class="nohighlight confluenceTh"><ul><li><p>The <em>Main Settings</em> pane is used to specify the input kinematics, tracking tasks, and control constraints as well as the time range for the analysis, and the output of the results.</p></li><li><p><span>The </span><em>External Loads</em><span> pane is used to specify parameters relating to the external loads applied to the model during the analysis.</span></p></li><li><p>The<em> Integrator Settings</em> pane is described more in <a href="Settings%2BFiles%2Band%2BXML%2BTag%2BDefinitions.html">Settings Files and XML Tag Definitions</a>.</p></li></ul><p> </p></th></tr></tbody></table></div><p><strong>Figure</strong><strong>:</strong> <strong>Window for the RRA Tool.</strong> The residual reduction tool window has three panes. The <em>Main Settings</em> pane is shown here; there are other tabs for describing additional actuators (residual and reserve) to be used and integrator settings for forward dynamics simulation (as described in <a href="How%2Bto%2BUse%2Bthe%2BForward%2BDynamics%2BTool.html">How to Use the Forward Dynamics Tool</a>).</p><p><h3 id="HowtoUsetheRRATool-TheControlPanel">The Control Panel</h3><p>At the bottom of all the Tool dialog windows are four buttons, located in what we call the <em>Control Panel</em>.</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="nohighlight confluenceTh"><img class="confluence-embedded-image" src="attachments/3376096/3736747.png" data-image-src="attachments/3376096/3736747.png"></th><th class="nohighlight confluenceTh"><ul><li>The <strong>Load and Save</strong> buttons are used to load or save settings for the tool. </li><li>The <strong>Run</strong> button starts execution. </li><li>The <strong>Close</strong> button closes the window.</li><li>The <strong>Help </strong>button takes you to the relevant section of the User Guide.</li></ul><div class='panelMacro'><table class='infoMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/information.png" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><p>Note that the <strong>Close</strong> button can be clicked immediately after execution has begun; the execution will complete even though the window has been closed.</p></td></tr></table></div><p> </p><ul><li>If you click <strong>Load…</strong>, you will be presented with a file browser that displays all files ending with the <strong>.xml</strong> suffix. You may browse for an appropriate settings file (e.g., <span style="color: rgb(0,128,0);"><strong>subject01_Forward_Setup.xml or subject01_Scale_Setup.xml)</strong></span>) and click <strong>Open</strong>. The tool will then be populated with the settings in that setup file.</li><li>If you have manually entered or modified settings, you may save those settings to a file for future use. If you click <strong>Save…</strong>, a Save dialog box will come up in which you can specify the name of the settings file. The name you specify for the file should have a suffix of <strong>.xml</strong>. Click <strong>Save</strong> to save the settings to file.</li><li><p>After you click <strong>Save</strong>, you may be presented with another dialog box that asks you whether or not you would like to save some of the settings to separate external files. This can be useful if you would like to reuse those settings for other trials or subjects. Check the boxes of the settings that you'd like to save to external files and specify the names of these files. All of these files should have a suffix of <strong>.xml</strong>.</p></li></ul></th></tr></tbody></table></div></p><h3 id="HowtoUsetheRRATool-ConfiguringtheRRATool">Configuring the RRATool</h3><p>To configure the RRATool, check <strong>Adjust model</strong> and specify a body to adjust. Specifically, RRA will compute the average residual forces that were necessary for tracking and use these values to change the center of mass location of the body specified and recommend mass adjustments. Secondly, kinematics are tracked (according to the task weightings) and experimental accelerations are not imposed as constraints.</p><h3 id="HowtoUsetheRRATool-ReplacingModelActuators">Replacing Model Actuators</h3><p>Critical to RRA is the replacement of muscles with just one ideal actuator per coordinate. In the gait2354_simbody example, these correspond to residuals for the pelvis' six degrees of freedom and reserves for all other model internal coordinates (joint angles). Under the <strong>Actuators and External Loads</strong> tab, you would load the gait2354_RRA_Actuators.xml file and select <strong>Replace model's force set </strong>(the only option).</p><h2 id="HowtoUsetheRRATool-Command-lineExecution">Command-line Execution</h2><p>RRA uses the command <strong>rra -S &lt;setup file name&gt;</strong>, for example, </p><div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">rra -S subject01_Setup_RRA.xml</pre>
		</div>
</div></div><div class="panel" style="background-color: white;border-color: gray;border-style: solid;border-width: 5px;"><div class="panelContent" style="background-color: white;">
<p>Next: <a href="Settings%2BFiles%2Band%2BXML%2BTag%2BDefinitions.html">Settings Files and XML Tag Definitions</a></p><p>Previous: <a href="How%2BRRA%2BWorks.html">How RRA Works</a></p><p>Home: <a href="Residual%2BReduction%2BAlgorithm.html">Residual Reduction Algorithm</a></p>
</div></div>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/3376196/3737163.png">worddavd18af869ddf5417f2c3884beabd90208.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/3376196/3737162.png">rra-1.PNG</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" style="background: url(http://simtk-confluence.stanford.edu:8080/images/border/border_bottom.gif) repeat-x;">
                <p><small>Document generated by Confluence on Feb 24, 2014 09:27</small></p>
            </div>
        </div>     </body>
</html>

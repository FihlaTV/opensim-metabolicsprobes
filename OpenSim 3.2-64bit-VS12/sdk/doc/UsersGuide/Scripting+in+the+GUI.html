<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>OpenSim Documentation : Scripting in the GUI</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body>
        <div id="page">
            <div id="main">
                <div id="main-header" class="pageSectionHeader">
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            OpenSim Documentation : Scripting in the GUI
                        </span>
                    </h1>

                    <div class="page-metadata">
                        <p>This page last changed on Feb 04, 2014 by <font color="#0050B2">dunne.jimmy</font>.</p>
                    </div>
                </div>

                <div id="content" class="view">
                    <div id="main-content" class="wiki-content group">
                    <div><p><span style="color: rgb(0,0,0);">As of version 3.0, OpenSim comes with a built in scripting shell that allows user access to the OpenSim API for loading, editing, and building models, running tools, plotting results, and more. The syntax for the scripting shell in the GUI is Python.</span></p><p><span style="color: rgb(0,0,0);"> </span><div>
<ul>
    <li><a href='#ScriptingintheGUI-WhatsAvailable'>Whats Available</a></li>
    <li><a href='#ScriptingintheGUI-Limitations '>Limitations &nbsp;</a></li>
    <li><a href='#ScriptingintheGUI-GettingStarted'>Getting Started</a></li>
    <li><a href='#ScriptingintheGUI-TipsandTricks'>Tips and Tricks</a></li>
    <li><a href='#ScriptingintheGUI-AvailableExampleScripts'>Available Example Scripts</a></li>
</ul></div></p><h2 id="ScriptingintheGUI-WhatsAvailable">Whats Available</h2><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="nohighlight confluenceTh"><img class="confluence-embedded-image" width="500" src="attachments/3376221/5964247.jpg" data-image-src="attachments/3376221/5964247.jpg"></th><th class="nohighlight confluenceTh"><ul><li>Access to the API for model editing and building</li><li>Access to the tools for processing and workflow batch processing</li><li>Access to most of the commands available from the OpenSim application menu and most of the selections tasks you can currently perform in the GUI</li><li>A streamlined interface to the plotter so that you can easily create, customize and export curves from the plotter.  </li><li>Limited access to the graphics window (e.g. selection and camera control)</li></ul></th></tr></tbody></table></div><h2 id="ScriptingintheGUI-Limitations ">Limitations  </h2><p><span style="color: rgb(51,51,51);">Some internal SimTK classes (that belong to the SimTK namespace and Simbody internal functionality) are not available for construction, but the most commonly used classes are available as of version 3.1 (SimTK::Vec3, Vector, Mat33, State, Inertia)</span></p></div><h2 id="ScriptingintheGUI-GettingStarted">Getting Started</h2><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="nohighlight confluenceTh"><p><img class="confluence-embedded-image" width="500" src="attachments/5116226/5046882.png" data-image-src="http://simtk-confluence.stanford.edu:8080/download/attachments/5116226/scripting-10.PNG?version=1&amp;modificationDate=1382550928178"><img class="confluence-embedded-image" width="500" src="attachments/5116226/5046884.png" data-image-src="http://simtk-confluence.stanford.edu:8080/download/attachments/5116226/Untitled-7.png?version=1&amp;modificationDate=1382550928201"></p><p> </p><p><img class="confluence-embedded-image" width="500" src="attachments/5116226/5046883.png" data-image-src="http://simtk-confluence.stanford.edu:8080/download/attachments/5116226/scripting-3.png?version=1&amp;modificationDate=1382550928193"></p></th><th class="nohighlight confluenceTh"><ol><li>Launch OpenSim and select<strong> Window &gt; ScriptingShell</strong> to bring up the scripting window. This will display the main scripting shell window (&quot;Jython Interactive Console&quot;) and the &quot;Command History&quot; of executed scripting commands.<br /> </li><li>Select<strong> Scripts &gt; Open</strong>... (Open &gt; Browse for file... prior to OpenSim 3.1). Find the Scripts folder located in the directory where you installed OpenSim. There are many example scripts included with the OpenSim distribution. You can review these to get an idea of the capabilities of scripting or you can modify them to streamline the workflow of your own research. <br /> </li><li>Choose &quot;testVisuals.py&quot;. The script will open in the OpenSim GUI's file editor. This script demonstrates how you can control visualization via scripting. The script loads a model (&quot;gait2392_simbody&quot;), changes the color of the pelvis, makes the right femur transparent, and aligns the model view with the x axis.<br /> </li><li>To run the script <strong>hit F5</strong>, with the script open. Alternately, you can choose <strong>Scripts &gt; Run Current Script</strong>.<br /> </li><li>Go to the <strong>Scripting Shell Window</strong> and review the <strong>Command History</strong>, on the right hand side of the window. This will show you all of the scripting commands that were executed. Review the commands that performed each of the actions in the testVisuals script.<br /> </li><li>Try executing another script command to change the opacity or color of the pelvis. Enter the commands at the prompt &gt;&gt;&gt;. You can copy and paste lines of code to test individual commands. <br /> </li><li>Try doing the same thing by modifying the testVisuals.py script. Find the &quot;Scripts&quot; folder in your OpenSim Install directory, open the file with a text editor (e.g. Notepad++), and add the command. Save the script with a new name (e.g. myTestVisuals.py). Return to OpenSim and try out the new script. You can run the script directly by selecting <strong>Scripts -&gt; Run...</strong> and navigating to your script. Does it perform the function you expect? <br /> </li><li>Now try running, reviewing, and modifying the other example scripts included with your OpenSim distribution. The full list is below.<br /> </li><li>Learn more about scripting in the section on <a href="Common%2BScripting%2BCommands.html">Common Scripting Commands</a>.</li></ol></th></tr></tbody></table></div><h2 id="ScriptingintheGUI-TipsandTricks">Tips and Tricks</h2><ul><li>You can change the location of the Scripts directory by going to <strong>Edit &gt; Preferences</strong> and changing the directory under the &quot;ScriptsPath&quot; option (see <a href="User%2BPreferences.html">User Preferences</a> for more information). <br /><ul><li>Directories are relative to the OpenSim installation Directory (e.g. Specifying &quot;MyScripts&quot; will look for scripts in the folder C:\ProgramFiles\OpenSim3.0\MyScripts if you installed OpenSim in the folder C:\ProgramFiles\OpenSim3.0). </li><li>Note that you have to restart OpenSim for the change to take place.</li></ul></li><li>After loading a script, variables defined in the script are available for future reference</li><li>A panel to echo commands and files executed in the scripting shell is available  (the &quot;Command History&quot;). You can clear the command history by right clicking in the window and selecting &quot;Clear&quot;.</li><li>If there are errors in running a script from file, you can view the corresponding error messages by clicking on the red error icon in the bottom right of the OpenSim screen, and then selecting &quot;Show Details&quot;</li><li>In the GUI scripting shell, code executed as part of for loops or if statements is controlled by indentation, rather than braces as in C++ or the for/end convention in Matlab. Otherwise, at the ScriptingShell command prompt, you must<strong> enter one line at a time.</strong></li></ul><h2 id="ScriptingintheGUI-AvailableExampleScripts">Available Example Scripts</h2><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Script Name</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><span>runTutorialOne.py</span></td><td class="confluenceTd">This example script performs the steps performed in <a href="http://simtk-confluence.stanford.edu:8080/display/OpenSim/Tutorial+1+-+Intro+to+Musculoskeletal+Modeling">Tutorial 1 - Intro to Musculoskeletal Modeling</a></td></tr><tr><td colspan="1" class="confluenceTd"><span>runTutorialTwo.py</span></td><td colspan="1" class="confluenceTd">This example script performs the steps performed in <a href="http://simtk-confluence.stanford.edu:8080/display/OpenSim/Tutorial+2+-+Simulation+and+Analysis+of+a+Tendon+Transfer+Surgery">Tutorial 2 - Simulation and Analysis of a Tendon Transfer Surgery</a></td></tr><tr><td colspan="1" class="confluenceTd"><span>runTutorialThree.py</span></td><td colspan="1" class="confluenceTd">This example script performs the steps performed in <a href="http://simtk-confluence.stanford.edu:8080/display/OpenSim/Tutorial+3+-+Scaling%2C+Inverse+Kinematics%2C+and+Inverse+Dynamics">Tutorial 3 - Scaling, Inverse Kinematics, and Inverse Dynamics</a></td></tr><tr><td colspan="1" class="confluenceTd"><span>testVisuals.py</span></td><td colspan="1" class="confluenceTd">Demonstrates control of visuals. Loads a model (Both Legs with Muscles), changes the color of the pelvis, makes the right femur transparent, and aligns the model view with the x axis. </td></tr><tr><td class="confluenceTd">testShowModelSummary.py</td><td class="confluenceTd">Displays information about a the current model in a standalone dialog</td></tr><tr><td class="confluenceTd">plotMuscleFiberLengthAgainstFile.py</td><td class="confluenceTd"><p>Shows how to create and display a plot window. The script loads the BothLegs OpenSim model adds curves of fiber length for the model. Then, it loads and plots data from a storage file, which contains fiber lengths for the model Subject01_simbody that is included with the OpenSim distribution</p></td></tr><tr><td colspan="1" class="confluenceTd">plotMuscleMomentArmAgainstMotion.py</td><td colspan="1" class="confluenceTd">Shows how to plot muscle moment arms as a function of a motion.</td></tr><tr><td colspan="1" class="confluenceTd">makeUlnaHeavy.py</td><td colspan="1" class="confluenceTd">Shows how to create a modified version of a model that is loaded in the GUI. The Arm26 model must be loaded and current in the GUI to run this script. The script increases the mass of the ulna. The modified model is then loaded in the GUI.</td></tr><tr><td colspan="1" class="confluenceTd">alterTendonSlackLength.py</td><td colspan="1" class="confluenceTd">Shows how to change the attributes of the muscles for the current model (tendonSlackLength in this example).</td></tr><tr><td colspan="1" class="confluenceTd"><p>runMultipleIKTrials.py</p></td><td colspan="1" class="confluenceTd">Runs multiple inverse kinematics trials. To see the results load the model and ik output in the GUI.</td></tr><tr><td colspan="1" class="confluenceTd">strengthenModel.py</td><td colspan="1" class="confluenceTd"><p>Increases the maxIsometricForce of all the muscles in the currently loaded model. A pop-up dialog displays a confirmation with the name of the new model.</p></td></tr><tr><td colspan="1" class="confluenceTd">editProperties.py</td><td colspan="1" class="confluenceTd">Script to demonstrate how to edit model component properties.</td></tr><tr><td colspan="1" class="confluenceTd">createControlsFromStorage.py</td><td colspan="1" class="confluenceTd">Helper function to create a controls.xml file from a .sto file.</td></tr></tbody></table></div><div class="panel" style="background-color: white;border-color: gray;border-style: solid;border-width: 5px;"><div class="panelContent" style="background-color: white;">
<p>Next: <a href="Scripting%2Bwith%2BMatlab.html">Scripting with Matlab</a></p><p>Previous: <a href="Common%2BScripting%2BCommands.html">Common Scripting Commands</a></p><p>Home: <a href="http://simtk-confluence.stanford.edu:8080/display/OpenSim/Scripting+and+Development">Scripting and Development</a></p>
</div></div>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/3376221/5046631.png">Untitled-7.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/3376221/5046632.png">scripting-3.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/3376221/5046633.png">scripting-10.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/3376221/5964247.jpg">guiScripting1.jpg</a> (image/jpeg)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" style="background: url(http://simtk-confluence.stanford.edu:8080/images/border/border_bottom.gif) repeat-x;">
                <p><small>Document generated by Confluence on Feb 24, 2014 09:28</small></p>
            </div>
        </div>     </body>
</html>

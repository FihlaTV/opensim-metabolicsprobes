<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>OpenSim Documentation : How to Use the Forward Dynamics Tool</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body>
        <div id="page">
            <div id="main">
                <div id="main-header" class="pageSectionHeader">
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            OpenSim Documentation : How to Use the Forward Dynamics Tool
                        </span>
                    </h1>

                    <div class="page-metadata">
                        <p>This page last changed on Jun 20, 2013 by <font color="#0050B2">jenhicks</font>.</p>
                    </div>
                </div>

                <div id="content" class="view">
                    <div id="main-content" class="wiki-content group">
                    <h2 id="HowtoUsetheForwardDynamicsTool-HowtoUsetheGUI">How to Use the GUI</h2><p>The Forward Dynamics Tool is accessed by selecting <strong>Tools</strong> → <strong>Forward Dynamics…</strong> from the OpenSim main menu bar. Like all tools, the operations performed by the Forward Dynamics Tool apply to the current model. The name of the current model is shown in bold in the Navigator. See chapters <a href="Opening%252C%2BClosing%252C%2Band%2BUsing%2Bthe%2BNavigator%2BWindow.html">Opening, Closing, and Using the Navigator Window</a> for information on opening models and making a particular model current.</p><p>As of 3.1, you can also use the Simulation Controls in the toolbar to quickly run a simulation. See the section on the <a href="Toolbar.html">Toolbar</a> to learn more.</p><p>The Forward Dynamics Tool is controlled by a window with three tabbed panes (figure below). </p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="nohighlight confluenceTh"><img class="confluence-embedded-image" src="attachments/3376191/3737133.png" data-image-src="attachments/3376191/3737133.png"></th><th class="nohighlight confluenceTh"><ul><li><p>The <em>Main Settings</em> pane specifies parameters relating to the controls and states that will be input into the model, the time range for the simulation, and the output of the results.</p></li><li><p><span>The </span><em>Actuators and External Loads</em><span> pane specifies the actuator set and the external loads applied to the model during the simulation. </span></p></li><li><p><span>The </span><em>Integrator Settings</em><span> pane specifies integrator step sizes and tolerances used to solve the simulation. The controls and states from the CMC solution are used to drive the forward simulation of the recorded movement.</span></p><p> </p><p> </p><p><span><br /></span></p><p><span><br /></span></p></li></ul></th></tr></tbody></table></div><p><strong>Figure</strong><strong>: Window for the Forward Dynamics Tool, </strong><strong>Saving and Loading Settings</strong></p><p><strong><br /></strong><h3 id="HowtoUsetheForwardDynamicsTool-TheControlPanel">The Control Panel</h3><p>At the bottom of all the Tool dialog windows are four buttons, located in what we call the <em>Control Panel</em>.</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="nohighlight confluenceTh"><img class="confluence-embedded-image" src="attachments/3376096/3736747.png" data-image-src="attachments/3376096/3736747.png"></th><th class="nohighlight confluenceTh"><ul><li>The <strong>Load and Save</strong> buttons are used to load or save settings for the tool. </li><li>The <strong>Run</strong> button starts execution. </li><li>The <strong>Close</strong> button closes the window.</li><li>The <strong>Help </strong>button takes you to the relevant section of the User Guide.</li></ul><div class='panelMacro'><table class='infoMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/information.png" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><p>Note that the <strong>Close</strong> button can be clicked immediately after execution has begun; the execution will complete even though the window has been closed.</p></td></tr></table></div><p> </p><ul><li>If you click <strong>Load…</strong>, you will be presented with a file browser that displays all files ending with the <strong>.xml</strong> suffix. You may browse for an appropriate settings file (e.g., <span style="color: rgb(0,128,0);"><strong>subject01_Forward_Setup.xml or subject01_Scale_Setup.xml)</strong></span>) and click <strong>Open</strong>. The tool will then be populated with the settings in that setup file.</li><li>If you have manually entered or modified settings, you may save those settings to a file for future use. If you click <strong>Save…</strong>, a Save dialog box will come up in which you can specify the name of the settings file. The name you specify for the file should have a suffix of <strong>.xml</strong>. Click <strong>Save</strong> to save the settings to file.</li><li><p>After you click <strong>Save</strong>, you may be presented with another dialog box that asks you whether or not you would like to save some of the settings to separate external files. This can be useful if you would like to reuse those settings for other trials or subjects. Check the boxes of the settings that you'd like to save to external files and specify the names of these files. All of these files should have a suffix of <strong>.xml</strong>.</p></li></ul></th></tr></tbody></table></div></p><h3 id="HowtoUsetheForwardDynamicsTool-MainSettingsPane">Main Settings Pane</h3><p>The <em>Main Settings</em> pane is used to specify parameters relating to the subject data, the generic model, and how the model is to be scaled. The pane is organized into four main sections entitled <em>Current Model, Input, Time,</em> and <em>Output</em>.</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="nohighlight confluenceTh"><img class="confluence-embedded-image" src="attachments/3376191/3737132.png" data-image-src="attachments/3376191/3737132.png"></th><th class="nohighlight confluenceTh"><ul><li><p>The section for <em>Current Model</em> displays uneditable information about the current model that is to be used for analysis by the Forward Dynamics Tool.</p></li></ul></th></tr><tr><td class="confluenceTd"><img class="confluence-embedded-image" src="attachments/3376191/3737131.png" data-image-src="attachments/3376191/3737131.png"></td><td class="confluenceTd"><ul><li>The section for <em>Input</em> displays editable information that allows you to specify the controls and states or motion to be used to run the forward simulation, as discussed in <a href="How%2BForward%2BDynamics%2BWorks.html">How Forward Dynamics Works</a>. </li><li>You may use the folder button to browse for the controls and states or motion files. Both these settings are optional with the default behavior to use zero value for controls if none is specified and to use the inital pose of the model in case no initial states file is specified. </li><li>Since most OpenSim muscle models have internal states (e.g. Fiberlength and Activation for many muscle models), the check box to &quot;<strong>solve for equilibrium of actuator states</strong>&quot; is provided to allow the muscles to initialize to reasonable non-zero fiberlength if the initial states file does not contain values for these muscle states or if an initial states file is not specified altogether. This is done by computing a fiber length for the muscle that is consistent with the muscle's activation level.</li></ul></td></tr><tr><td class="confluenceTd"><img class="confluence-embedded-image" src="attachments/3376191/3737130.png" data-image-src="attachments/3376191/3737130.png"></td><td class="confluenceTd"><ul><li>The section for <em>Time</em> displays editable information that allows you to specify the start and end time for the forward simulation. </li></ul></td></tr><tr><td class="confluenceTd"><img class="confluence-embedded-image" src="attachments/3376191/3737129.png" data-image-src="attachments/3376191/3737129.png"></td><td class="confluenceTd"><ul><li>The section for <em>Output</em> displays editable information that allows you to specify the prefix appended to all of the resulting output files, the directory to which the files are saved, and the precision of the decimal places used when writing results. </li><li>You may use the folder button to browse for and specify a directory in which to save the output files.</li><li>You may use the <img class="confluence-embedded-image" height="14" width="24" src="attachments/3376191/3737138.png" data-image-src="attachments/3376191/3737138.png" title="worddavd2374ed113da078b95a2b6b1cd102516.png [imported from a Word document]"> button to open an Explorer window to the specified directory.</li></ul></td></tr></tbody></table></div><p> </p><h3 id="HowtoUsetheForwardDynamicsTool-ActuatorsandExternalLoadsPane">Actuators and External Loads Pane</h3><p>The <em>Actuators and External Loads</em> pane is used to specify parameters relating to the actuators appended to the model and the external loads applied to the model during the forward dynamic simulation. The pane is organized into two main sections entitled <em>Actuators</em> and <em>External Loads</em>.</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="nohighlight confluenceTh"><img class="confluence-embedded-image" src="attachments/3376191/3737128.png" data-image-src="attachments/3376191/3737128.png"></th><th class="nohighlight confluenceTh"><ul><li><p>The section for <em>Actuators</em> displays editable information that allows you to specify additional force set files that specify forces to supplement the muscles of the model, as discussed in <a href="How%2BForward%2BDynamics%2BWorks.html">How Forward Dynamics Works</a>. </p></li><li><p><span>You may use the </span><img class="confluence-embedded-image" height="13" width="38" src="plugins/servlet/confluence/placeholder/unknown-attachment" title="worddav4596015466186593bd85bc221d4414d0.png"><span> button to edit the list of force set files describing the forces to be appended to or replaced in the model.</span></p></li></ul></th></tr><tr><td class="confluenceTd"><img class="confluence-embedded-image" width="300" src="attachments/3376191/3737127.png" data-image-src="attachments/3376191/3737127.png"></td><td class="confluenceTd"><ul><li> The information in the <em>External Loads</em> section is optional. </li><li>If checked, the section displays information so that you can specify the external loads applied to the model. </li><li>Please refer to the section on ExternalLoads specification under the <a href="How%2Bto%2BUse%2Bthe%2BInverse%2BDynamics%2BTool.html">How to Use the Inverse Dynamics Tool</a> for more details.</li></ul></td></tr></tbody></table></div><p> </p><h3 id="HowtoUsetheForwardDynamicsTool-Analyses">Analyses</h3><p>Analyses can be performed while running forward simulation by including them on the Analysis pane. The main purpose for the forward dynamics step, besides validating the CMC results in a basic open-loop forward dynamics system, is to record additional simulation data. Getting additional output data from the Forward Dynamics Tool is done through the use of analyses. These are not unique to the Forward Dyanamics Tool and in fact, analyses can be added to RRA and CMC as well. But since forward runs are significantly faster than CMC, it is more practical to tweak and re-run forward simulations to obtain new data rather than re-run CMC. </p><p>The basic analyses of interest are: </p><ul><li><span style="color: rgb(0,0,128);"><strong>Kinematics</strong></span><strong>:</strong> Records the generalized coordinates (q's), generalized speeds (u's), and the accelerations (i.e., derivatives of the generalized speeds: du/dt)</li><li><span style="color: rgb(0,0,128);"><strong>BodyKinematics</strong></span><strong>:</strong> Records the configuration (center of mass position and orientation) of each body, as well as their velocities (linear and angular) and accelerations (linear and angular). Additionally, it records the overall center of mass of the model, as well as the velocity and acceleration of this center of mass.</li><li><span style="color: rgb(0,0,128);"><strong>Actuation</strong></span><strong>:</strong> Records the generalized force, speed, and power developed by each actuator of the model. The generalized force can either be a force (with units N) or a torque (with units Nm). The actuator speed is the rate at which the actuator shortens. Depending on the actuator, a speed can be either a translational speed (m/s) or an angular speed (deg/s). An actuator power (Watts) is the rate at which an actuator does work. Positive work means that the actuator is delivering energy to the model; negative power means that the actuator is absorbing energy from the model.</li></ul><p> </p><div class='panelMacro'><table class='infoMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/information.png" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><p>See the section on <a href="Analyses.html">Analyses</a> for more information and different types of analyses.</p></td></tr></table></div><p> </p><h3 id="HowtoUsetheForwardDynamicsTool-IntegratorSettingsPane">Integrator Settings Pane</h3><p>The <em>Integrator Settings</em> pane is used to specify parameters of the numerical integrator used during the simulation.</p><p>If using controls from <a href="Computed%2BMuscle%2BControl.html">Computed Muscle Control</a>, It is recommended that you use the same integration time steps. To do so:</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="nohighlight confluenceTh"><img class="confluence-embedded-image" src="attachments/3376191/3737126.png" data-image-src="attachments/3376191/3737126.png"></th><th class="nohighlight confluenceTh"><ol><li><p>Select the checkbox next to <strong>Use time steps from states file</strong>. You can also manually input the integrator settings. </p></li><li><p>Deselect the checkbox next to <strong>Use time steps from states file.</strong> </p></li><li><p>Enter appropriate values in the textboxes for <strong>Integrator steps</strong> and <strong>Integrator tolerances</strong>.</p></li></ol></th></tr></tbody></table></div><h2 id="HowtoUsetheForwardDynamicsTool-Command-lineExecution">Command-line Execution</h2><p>The Forward Dynamics Tool is run using the command <strong>forward -S &lt;setup file name&gt;,</strong> for example,</p><div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<div id="root">
		<pre class="theme: Confluence; brush: java; gutter: false">forward -S subject01_Setup_Forward.xml </pre>
		</div>
</div></div><div class="panel" style="background-color: white;border-color: gray;border-style: solid;border-width: 5px;"><div class="panelContent" style="background-color: white;">
<p>Next: <a href="Forward%2BDynamics%2BSetup%2BFiles%2Band%2BXML%2BTags.html">Forward Dynamics Setup Files and XML Tags</a></p><p>Previous: <a href="How%2BForward%2BDynamics%2BWorks.html">How Forward Dynamics Works</a></p><p>Home: <a href="Forward%2BDynamics.html">Forward Dynamics</a></p>
</div></div>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/3376191/3737138.png">worddavd2374ed113da078b95a2b6b1cd102516.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/3376191/3737133.png">fd-1.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/3376191/3737132.png">fd-2.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/3376191/3737131.png">fd-3.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/3376191/3737130.png">fd-4.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/3376191/3737129.png">fd-5.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/3376191/3737128.png">fd-6.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/3376191/3737127.png">fd-7.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/3376191/3737126.png">fd-8.PNG</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" style="background: url(http://simtk-confluence.stanford.edu:8080/images/border/border_bottom.gif) repeat-x;">
                <p><small>Document generated by Confluence on Feb 24, 2014 09:27</small></p>
            </div>
        </div>     </body>
</html>
